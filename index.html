<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Main meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Page title displayed in the browser tab -->
    <title>Games - HEAT Labs</title>
    <!-- Primary Meta Tags -->
    <meta name="title" content="HEAT Labs - Games">
    <meta name="description" content="Interactive mini-games, tools and other community-driven experiences for World of Tanks: HEAT.">
    <meta name="author" content="HEAT Labs Team">
    <meta name="copyright" content="Â© 2025 HEAT Labs by SINEWAVE Development. All rights reserved.">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="language" content="English">
    <!-- Discord Activity Meta Tags -->
    <meta name="discord:activity" content="HEAT Labs Games">
    <meta name="discord:details" content="Browsing games to play">
    <meta name="discord:large_image" content="heat_labs_logo">
    <meta name="discord:large_text" content="HEAT Labs Game Hub">
    <meta name="discord:small_image" content="heat_logo">
    <meta name="discord:small_text" content="World of Tanks: HEAT">
    <meta name="discord:buttons" content="Visit HEAT Labs|https://heatlabs.net,Join The Community|https://discord.heatlabs.net">
    <!-- Keywords -->
    <meta name="keywords" content="world of tanks heat, tank database, heat labs, armor profiles, tank comparison, map information, tank statistics, community guides, wot heat, game news">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://games.heatlabs.net">
    <!-- Sitemap -->
    <link rel="sitemap" type="application/xml" href="site-data/sitemap.xml">
    <!-- Main stylesheets -->
    <link rel="stylesheet" href="assets/css/libraries/tailwind.css">
    <link rel="stylesheet" href="assets/css/libraries/font-awesome/all.css">
    <!-- Header stylesheet -->
    <style>
      /* Page Header */
      .page-header {
        background-color: #1e1e1e;
        padding: 16px 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
        min-height: 60px;
        width: 100%;
        box-sizing: border-box;
      }

      .page-title-container {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .back-button {
        display: inline-flex;
        align-items: center;
        padding: 8px 16px;
        background-color: #ff8300;
        color: white;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        text-decoration: none;
        font-size: 14px;
        gap: 8px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .back-button i {
        font-size: 14px;
      }

      .page-title {
        font-size: 24px;
        font-weight: 700;
        color: #ffffff;
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .page-subtitle {
        font-size: 14px;
        color: #b0b0b0;
        margin: 1px 0 0 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      /* Base body styles */
      body {
        background-color: #121212;
        color: #e0e0e0;
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      /* Ensure full width for Discord */
      html,
      body {
        width: 100%;
        height: 100%;
        overflow-x: hidden;
      }

      .back-button:hover {
        background-color: #e67600;
      }

      /* Games Grid Container */
      .games-container {
        width: 100%;
        height: calc(100vh - 92px);
        display: flex;
        flex-direction: column;
        padding: 20px;
        box-sizing: border-box;
      }

      .games-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 20px;
        width: 100%;
        height: 100%;
        max-width: 1200px;
        max-height: 800px;
        margin: 0 auto;
      }

      /* Game Card Styles */
      .game-card {
        background-color: #1e1e1e;
        border-radius: 12px;
        padding: 24px;
        display: flex;
        flex-direction: column;
        border: 1px solid #2a2a2a;
        transition: transform 0.2s ease, border-color 0.2s ease;
        overflow: hidden;
      }

      .game-card:hover {
        transform: translateY(-2px);
        border-color: #3a3a3a;
      }

      .game-image {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 8px;
        margin-bottom: 16px;
        background-color: #2a2a2a;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #888;
        font-size: 48px;
      }

      .game-title {
        font-size: 20px;
        font-weight: 700;
        color: #ffffff;
        margin: 0 0 8px 0;
        line-height: 1.2;
      }

      .game-description {
        font-size: 14px;
        color: #b0b0b0;
        margin: 0 0 20px 0;
        line-height: 1.5;
        flex-grow: 1;
      }

      .game-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 10px 20px;
        background-color: #ff8300;
        color: white;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        text-decoration: none;
        font-size: 14px;
        gap: 8px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .game-button:hover {
        background-color: #e67600;
      }

      /* Responsive adjustments for Discord frame */
      @media (max-width: 768px) {
        .games-grid {
          grid-template-columns: 1fr;
          grid-template-rows: repeat(4, 1fr);
          gap: 15px;
        }

        .game-image {
          height: 140px;
        }
      }

      /* Ensure no scrolling */
      body {
        overflow: hidden;
      }
    </style>
    <!-- Favicon for all browsers -->
    <link rel="icon" href="assets/images/favicons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="assets/images/favicons/favicon.ico" type="image/x-icon">
    <!-- Apple Touch Icons (for iOS home screen bookmarks) -->
    <link rel="apple-touch-icon" sizes="57x57" href="assets/images/apple/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/images/apple/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/images/apple/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/images/apple/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/images/apple/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/images/apple/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/images/apple/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/images/apple/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple/apple-icon-180x180.png">
    <!-- Favicons for different devices -->
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/android/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/images/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicons/favicon-16x16.png">
    <!-- Yandex-specific meta tags -->
    <link rel="yandex-tableau-widget" href="site-data/yandex-browser-manifest.json">
    <!-- Theme Support Declaration -->
    <meta name="color-scheme" content="light dark">
    <!-- Disable all automatic formatting detection -->
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="format-detection" content="address=no">
    <!-- Web Manifest -->
    <link rel="manifest" href="site-data/site.manifest">
    <!-- Windows-specific tiles (for pinned sites in Windows Start menu) -->
    <meta name="msapplication-TileColor" content="#141312">
    <meta name="msapplication-TileImage" content="assets/images/microsoft/ms-icon-144x144.png">
    <meta name="msapplication-config" content="site-data/browserconfig.xml">
    <!-- Safari-specific meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HEAT Labs">
    <!-- Browser UI color -->
    <meta name="theme-color" content="#141312">
    <meta name="msapplication-navbutton-color" content="#141312">
    <meta name="apple-mobile-web-app-status-bar-style" content="#141312">
    <!-- Open Graph Meta Tags (for social media sharing, mainly Facebook) -->
    <meta property="og:title" content="HEAT Labs - games">
    <meta property="og:description" content="Interactive mini-games, tools and other community-driven experiences for World of Tanks: HEAT.">
    <meta property="og:image" content="images/social-share/Games.png">
    <meta property="og:image:alt" content="Your one-stop solution for comprehensive statistics insights and guides for World of Tanks: HEAT">
    <meta property="og:url" content="https://games.heatlabs.net">
    <meta property="og:type" content="website">
    <meta property="og:image:width" content="1280">
    <meta property="og:image:height" content="320">
    <meta property="og:site_name" content="HEAT Labs">
    <meta property="og:locale" content="en_US">
    <!-- Twitter Card Meta Tags (for better sharing on Twitter) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@HEAT_Labs">
    <meta name="twitter:creator" content="@HEAT_Labs">
    <meta name="twitter:title" content="HEAT Labs - Games">
    <meta name="twitter:description" content="Interactive mini-games, tools and other community-driven experiences for World of Tanks: HEAT.">
    <meta name="twitter:image" content="images/social-share/Games.png">
    <meta name="twitter:image:alt" content="HEAT Labs - Your one-stop solution for comprehensive statistics insights and guides for World of Tanks: HEAT">
  </head>
  <body>
    <div class="page-header">
      <div class="page-title-container">
        <a href="#" class="back-button">
          <i class="fas fa-rotate"></i> Refresh </a>
        <div>
          <h1 class="page-title">HEAT Labs Games</h1>
          <p class="page-subtitle">Choose the game you want to play</p>
        </div>
      </div>
    </div>
    <div class="games-container">
      <div class="games-grid">
        <!-- Tier List Creator Card -->
        <div class="game-card">
          <h3 class="game-title">Tier List Creator</h3>
          <p class="game-description">Create and share custom tier lists for tanks.</p>
          <a href="tierlist.html" class="game-button">
            <i class="fas fa-play"></i> Play Now </a>
        </div>
        <!-- Random Tank Selector Card -->
        <div class="game-card">
          <h3 class="game-title">Random Tank Selector</h3>
          <p class="game-description">Can't decide what tank to play?</p>
          <a href="roulette.html" class="game-button">
            <i class="fas fa-play"></i> Play Now </a>
        </div>
        <!-- Alpha 3 Countdown Card -->
        <div class="game-card">
          <h3 class="game-title">Alpha 3 Countdown</h3>
          <p class="game-description">Track the time until the next Alpha release.</p>
          <a href="countdown.html" class="game-button">
            <i class="fas fa-play"></i> Play Now </a>
        </div>
        <!-- HEAT Wordle Card -->
        <div class="game-card">
          <h3 class="game-title">HEAT Wordle</h3>
          <p class="game-description">A World of Tanks: HEAT themed word puzzle.</p>
          <a href="wordle.html" class="game-button">
            <i class="fas fa-play"></i> Play Now </a>
        </div>
      </div>
    </div>
    <script src="window-check.js"></script>
    <script src="reload.js"></script>
    <script>
      // Configuration
      const DISCORD_CONFIG = {
        META_PREFIX: 'discord:',
        UPDATE_INTERVAL: 30000,
        // Default fallbacks
        DEFAULTS: {
          activity: 'HEAT Labs Games',
          details: 'Playing HEAT Labs Games',
          large_image: 'heat_labs_logo',
          large_text: 'HEAT Labs Game Hub'
        }
      };
      // State
      let isDiscordActivity = false;
      let presenceInterval = null;
      // Discord Bridge Class
      class DiscordBridge {
        constructor() {
          this.isReady = false;
          this.presenceMethods = [];
          this.detectMethods();
        }
        detectMethods() {
          // Method 1: Discord Native Bridge
          if (window.DiscordNative?.gameBridge) {
            console.log('Detected Discord Native Bridge');
            this.presenceMethods.push('native');
          }
          // Method 2: Discord SDK
          if (window.discordApp?.commands) {
            console.log('Detected Discord SDK');
            this.presenceMethods.push('sdk');
          }
          // Method 3: Window parent
          if (window.parent !== window) {
            console.log('Detected iframe environment');
            this.presenceMethods.push('iframe');
          }
          // Method 4: Discord Activity detection
          if (this.checkDiscordEnvironment()) {
            console.log('Detected Discord Activity environment');
            this.presenceMethods.push('activity');
          }
          this.isReady = this.presenceMethods.length > 0;
        }
        checkDiscordEnvironment() {
          // Check URL patterns
          if (window.location.href.includes('discord.gg/') || window.location.href.includes('discord.com/') || window.location.href.includes('discordapp.com/') || window.location.href.includes('discord-activities')) {
            return true;
          }
          // Check parent frame
          try {
            if (window.parent !== window) {
              const parentUrl = window.parent.location.href;
              return parentUrl.includes('discord') || parentUrl.includes('discordapp');
            }
          } catch (e) {
            // Can't access parent, likely in Discord iframe
            return true;
          }
          return false;
        }
        async updatePresence(presenceData) {
          if (!this.isReady) return false;
          let success = false;
          // Try native bridge first
          if (this.presenceMethods.includes('native')) {
            try {
              if (window.DiscordNative.gameBridge.updateActivity) {
                window.DiscordNative.gameBridge.updateActivity(presenceData);
                console.log('Presence updated via Native Bridge');
                success = true;
              }
            } catch (error) {
              console.warn('Native Bridge update failed:', error);
            }
          }
          // Try SDK if native failed
          if (!success && this.presenceMethods.includes('sdk')) {
            try {
              await window.discordApp.commands.setActivity({
                activity: presenceData
              });
              console.log('Presence updated via SDK');
              success = true;
            } catch (error) {
              console.warn('SDK update failed:', error);
            }
          }
          // Try iframe postMessage as fallback
          if (!success && this.presenceMethods.includes('iframe')) {
            try {
              window.parent.postMessage({
                type: 'DISCORD_ACTIVITY_UPDATE',
                data: presenceData
              }, '*');
              console.log('Presence sent via postMessage');
              success = true;
            } catch (error) {
              console.warn('postMessage failed:', error);
            }
          }
          return success;
        }
        async clearPresence() {
          if (!this.isReady) return;
          // Try native bridge
          if (this.presenceMethods.includes('native') && window.DiscordNative.gameBridge.clearActivity) {
            try {
              window.DiscordNative.gameBridge.clearActivity();
              console.log('Presence cleared via Native Bridge');
              return;
            } catch (error) {
              console.warn('Native Bridge clear failed:', error);
            }
          }
          // Try SDK
          if (this.presenceMethods.includes('sdk') && window.discordApp.commands.clearActivity) {
            try {
              await window.discordApp.commands.clearActivity();
              console.log('Presence cleared via SDK');
              return;
            } catch (error) {
              console.warn('SDK clear failed:', error);
            }
          }
          // Try iframe postMessage
          if (this.presenceMethods.includes('iframe')) {
            try {
              window.parent.postMessage({
                type: 'DISCORD_ACTIVITY_CLEAR'
              }, '*');
              console.log('Presence clear sent via postMessage');
            } catch (error) {
              console.warn('postMessage clear failed:', error);
            }
          }
        }
      }
      // Create global instance
      const discordBridge = new DiscordBridge();

      function getDiscordMetaTags() {
        const metaTags = {};
        const tags = document.querySelectorAll('meta[name^="discord:"]');
        tags.forEach(tag => {
          const name = tag.getAttribute('name').replace(DISCORD_CONFIG.META_PREFIX, '');
          const content = tag.getAttribute('content');
          if (content) {
            metaTags[name] = content;
          }
        });
        return metaTags;
      }

      function parseButtons(buttonsString) {
        if (!buttonsString) return [];
        return buttonsString.split(',').map(btn => {
          const [label, url] = btn.split('|');
          return label && url ? {
            label: label.trim(),
            url: url.trim()
          } : null;
        }).filter(btn => btn !== null).slice(0, 2);
      }

      function createPresenceData() {
        const meta = getDiscordMetaTags();
        // Use meta tags or defaults
        const presence = {
          name: meta.activity || DISCORD_CONFIG.DEFAULTS.activity,
          type: 0, // "Playing" activity
          details: meta.details || DISCORD_CONFIG.DEFAULTS.details,
          state: getPageState(),
          timestamps: {
            start: Math.floor(Date.now() / 1000)
          },
          assets: {
            large_image: meta.large_image || DISCORD_CONFIG.DEFAULTS.large_image,
            large_text: meta.large_text || DISCORD_CONFIG.DEFAULTS.large_text
          }
        };
        // Add small image
        if (meta.small_image) {
          presence.assets.small_image = meta.small_image;
          presence.assets.small_text = meta.small_text || 'HEAT Labs';
        }
        // Add buttons
        if (meta.buttons) {
          presence.buttons = parseButtons(meta.buttons);
        }
        return presence;
      }

      function getPageState() {
        const path = window.location.pathname;
        const states = {
          '/': 'Browsing games menu',
          '/index.html': 'Browsing games menu',
          '/tierlist.html': 'Creating tank tier lists',
          '/roulette.html': 'Spinning tank roulette',
          '/alpha-3-playtest.html': 'Tracking Alpha 3 playtest',
          '/wordle.html': 'Playing HEAT Wordle',
          '/404.html': 'Page not found'
        };
        return states[path] || 'Playing HEAT Labs';
      }
      async function updatePresence() {
        if (!isDiscordActivity) return;
        const presenceData = createPresenceData();
        console.log('Updating Discord presence:', presenceData);
        await discordBridge.updatePresence(presenceData);
      }
      async function initialize() {
        // Check if we are in Discord
        isDiscordActivity = discordBridge.checkDiscordEnvironment();
        if (!isDiscordActivity) {
          console.log('Not running in Discord Activity - presence disabled');
          return;
        }
        console.log('Running in Discord Activity - initializing presence');
        console.log('Available presence methods:', discordBridge.presenceMethods);
        // Parse and log meta tags
        const metaTags = getDiscordMetaTags();
        console.log('Found Discord meta tags:', metaTags);
        // Set initial presence
        await updatePresence();
        // Set up periodic updates
        presenceInterval = setInterval(updatePresence, DISCORD_CONFIG.UPDATE_INTERVAL);
        console.log('Discord presence system ready');
      }

      function cleanup() {
        if (presenceInterval) {
          clearInterval(presenceInterval);
          presenceInterval = null;
        }
        // Clear activity
        discordBridge.clearPresence();
        console.log('Discord activity cleaned up');
      }

      function handleVisibilityChange() {
        if (document.hidden) {
          // Page is hidden, cleanup
          cleanup();
        } else if (isDiscordActivity) {
          // Page visible again, re-initialize
          setTimeout(initialize, 500);
        }
      }
      // Initialize when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initialize);
      } else {
        // DOM already loaded
        setTimeout(initialize, 100);
      }
      // Clean up on page unload
      window.addEventListener('beforeunload', cleanup);
      window.addEventListener('pagehide', cleanup);
      // Handle tab visibility changes
      document.addEventListener('visibilitychange', handleVisibilityChange);
      // Also clean up when page might be suspended
      window.addEventListener('freeze', cleanup);
      window.addEventListener('resume', function() {
        if (isDiscordActivity && document.visibilityState === 'visible') {
          setTimeout(initialize, 500);
        }
      });
      // Listen for messages from Discord
      window.addEventListener('message', (event) => {
        if (event.data && event.data.type === 'DISCORD_SDK_READY') {
          console.log('Received Discord SDK ready message');
          discordBridge.detectMethods();
          if (isDiscordActivity) {
            updatePresence();
          }
        }
      });
    </script>
  </body>
</html>